{% extends 'base.html.twig' %}

{% block title %}Galerie{% endblock %}

{% block body %}
    <div class="gallery-container">
        <h1 class="title-licorice">Galerie d'images</h1>

        {% if is_granted('ROLE_ADMIN') %}
            <a href="{{ path('image_new') }}" class="btn btn-primary">Ajouter une nouvelle image</a>
        {% endif %}

        <div class="gallery" style="margin-top: 30px;"> <!-- Augmentation de l'espace en haut -->
            {% for image in images %}
                <div class="image-item">
                    {% if is_granted('ROLE_ADMIN') %}
                        <form method="post" action="{{ path('image_delete', {'id': image.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cette image ?');" style="position: absolute; top: 10px; left: 10px; z-index: 10;">
                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ image.id) }}">
                            <button class="btn btn-danger">Supprimer</button>
                        </form>
                    {% endif %}
                    <img src="{{ asset(image.path) }}" alt="{{ image.namePhoto }}" class="zoomable-image">
                </div>
            {% endfor %}
        </div>
    </div>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Licorice&display=swap');

        .gallery-container {
            background-color: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            max-width: 1200px;
            margin: auto;
            margin-top: 20px; /* Ajustement du positionnement */
            margin-bottom: 20px; /* Espace en bas */
        }

        .title-licorice {
            font-family: 'Licorice', cursive;
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        .btn {
            display: block;
            margin: 0 auto 20px auto;
            background-color: #007bff;
            border: none;
            padding: 10px 20px;
            color: white;
            text-transform: uppercase;
            cursor: pointer;
            border-radius: 5px;
        }

        .btn.btn-danger {
            background-color: #dc3545; /* Rouge */
        }

        .btn:hover {
            background-color: #0056b3;
        }

        .gallery {
            display: flex;
            flex-wrap: wrap;
            gap: 20px; /* Espacement entre les images */
            justify-content: center; /* Centrer les images horizontalement */
        }

        .image-item {
            width: 350px; /* Largeur fixe pour chaque image */
            height: 350px; /* Hauteur fixe pour chaque image */
            overflow: hidden; /* Masquer tout contenu dépassant de l'image */
            position: relative;
            margin-bottom: 20px; /* Espace en dessous de chaque image */
        }

        .image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Assure que l'image couvre tout l'espace de l'élément */
            display: block;
            border: 2px solid #000; /* Bordure noire de 2px autour de chaque image */
            border-radius: 8px; /* Coins arrondis */
            transition: transform 0.3s ease; /* Effet de transition pour une meilleure expérience utilisateur */
        }

        .image-item:hover img {
            transform: scale(1.1); /* Zoom légèrement l'image au survol */
        }

        .image-item form {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 10;
        }

        .zoomable-image:hover {
            transform: scale(1.2);
        }

        @media (max-width: 768px) {
            .image-item {
                width: calc(50% - 20px); /* Deux images par ligne sur les écrans moyens */
            }
        }

        @media (max-width: 480px) {
            .image-item {
                width: 100%; /* Une image par ligne sur les petits écrans */
            }
        }
    </style>
{% endblock %}
